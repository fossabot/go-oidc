{
    "alias": "goidc",
    "server": {
        "discoveryUrl": "https://auth.localhost:8445/.well-known/openid-configuration"
    },
    "client": {
        "client_name": "client_one"
    },
    "client2": {
        "client_name": "client_two"
    },
    "browser": [
        {
            "match": "https://auth.localhost*/authorize*",
            "tasks": [
                {
                    "task": "Login",
                    "match": "https://auth.localhost*/authorize/*/login",
                    "commands": [
                        ["text", "id", "username", "random@gmail.com"],
                        ["text", "id", "password", "pass"],
                        ["click", "id", "submit_button"]
                    ]
                },
                {
                    "task": "Consent",
                    "match": "https://auth.localhost*/authorize/*/consent",
                    "commands": [
                        ["click", "id", "submit_button"]
                    ]
                },
                {
                    "task": "Verify complete",
                    "match": "https://localhost.emobix.co.uk:8443/test/a/goidc/callback*",
                    "commands": [
                        ["wait", "id", "submission_complete", 10]
                    ]
                }
            ]
        }
    ],
    "override": {
        "oidcc-ensure-redirect-uri-in-authorization-request": {
            "browser": [
                {
                    "match": "https://auth.localhost*/authorize*",
                    "tasks": [
                        {
                            "task": "Expect redirect_uri is required",
                            "optional": true,
                            "match": "https://auth.localhost*/authorize*",
                            "commands": [
                                ["wait",  "xpath", "//*", 10, "Error", "update-image-placeholder"]
                            ]
                        }
                    ]
                }
            ]
        },
        "oidcc-redirect-uri-query-mismatch": {
            "browser": [
                {
                    "match": "https://auth.localhost*/authorize*",
                    "tasks": [
                        {
                            "task": "Expect redirect_uri is invalid",
                            "optional": true,
                            "match": "https://auth.localhost*/authorize*",
                            "commands": [
                                ["wait",  "xpath", "//*", 10, "Error", "update-image-placeholder"]
                            ]
                        }
                    ]
                }
            ]
        },
        "oidcc-redirect-uri-query-added": {
            "browser": [
                {
                    "match": "https://auth.localhost*/authorize*",
                    "tasks": [
                        {
                            "task": "Expect redirect_uri is invalid",
                            "optional": true,
                            "match": "https://auth.localhost*/authorize*",
                            "commands": [
                                ["wait",  "xpath", "//*", 10, "Error", "update-image-placeholder"]
                            ]
                        }
                    ]
                }
            ]
        }
    }
}
